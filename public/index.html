<!DOCTYPE html>
<html>
  <head>
    <title>App 0.0.0</title>
    <link rel="stylesheet" href="style.css">
    <script src="react.js"></script>
    <script src="react-dom.js"></script>
    <script src="https://npmcdn.com/babel-core@5.8.38/browser.min.js"></script>
    <script src="https://npmcdn.com/react-router/umd/ReactRouter.min.js"></script>
  </head>
  <body>
    <div id = root></div> 
    <script type="text/babel">
    /* temp
    */
    var Router = ReactRouter.Router;
    var Route = ReactRouter.Route;
    var Link = ReactRouter.Link;
    var browserHistory = ReactRouter.browserHistory;
    var IndexRoute = ReactRouter.IndexRoute;

    class App extends React.Component {
      render () {
        return<div>
                <h1 id="title"> App 0.0.0 </h1>
                <h2>You see this? This... is my BOOMSTICK!</h2>
                <div id="link"><Link to="/about">About</Link></div> 
                {this.props.children}
              </div>
      }
    }

    class Forms extends React.Component {
      render() {
        return <div>
                <Signup/>
                <Login/>
              </div>
      }
    }
    class Signup extends React.Component {
      render () {
        return <div>
                <form id="signupForm" action ="/api/signup" method="post">
                  <input name="slogin"/>
                  <input type="password" name="spassword"/>
                  <p><button id = "signupBtn">Sign up</button></p>             
                </form>
                <div id="swarn" className ="warn"></div>   
              </div>
      }
    }

    class Login extends React.Component {
      render () {
        return <div>
                <form id="loginForm" action ="/api/login" method="post">
                  <input name="login"/>
                  <input type="password" name="password"/>
                  <p><button id = "loginBtn">Log in</button></p>
                </form>
                <div id="lwarn" className ="warn"></div>    
              </div>
      }
    }

    class About extends React.Component {
      render () {
        return <div id = "about"> 
                Rumata Estorskij
              <div> 2016 </div>
              </div>
      }
    }

    class Userdata extends React.Component {
      constructor(props) {
        super(props);
        this.state = {projects: []};
        this.addProj = this.addProj.bind(this);
      }
      addProj () {
        this.setState( {projects: [...this.state.projects, field.value]} );
        console.log(this.state);
      }

      loadProjects () {
        console.log("request to server..SHOULD BE 1 TIME! BEFORE ADDING CUSTOM");
      }

      render () {
        let projects = this.state.projects;
        this.loadProjects();
        return <div>
                <input type ="text" id="field"/>
                <button onClick={this.addProj}>Add project</button>
                <ol>
                  {projects.map((el,i) => {
                    return <li key={i}> {el} </li>;
                  })}
                </ol>
              </div>
      }
    }

    ReactDOM.render((
      <Router history={browserHistory}>
        <Route path="/" component={App}>
          <IndexRoute component={Forms}/>
          <Route path="/about" component={About}/>
          <Route path="/userdata" component={Userdata}/>
        </Route>
      </Router>
    ), document.getElementById('root'));
  </script>
</body>
</html>